##
# Environment Variables Configuration
#
# Copy this file to .env and fill in your actual values
# Command: cp .env.example .env
#
# SECURITY WARNING: Never commit .env file to version control!
# The .gitignore file should already exclude it.
##

# ======================
# NextAuth Configuration (required for sign-in)
# ======================
# Must be the EXACT URL where you open the app in the browser (same protocol + host + port).
# If you use http://localhost:4200 in the browser, set NEXTAUTH_URL=http://localhost:4200
NEXTAUTH_URL=http://localhost:4200
# Secret for signing session cookies. Generate: openssl rand -base64 32
NEXTAUTH_SECRET='97Q7yOQLNL2kvbRYzY70ZyodEu5cWHNKuUFRnkW2Sbg='

# ======================
# Gmail API / Google OAuth (for NextAuth "Sign in with Google")
# ======================
# Get these from Google Cloud Console → APIs & Services → Credentials
# Create or edit an "OAuth 2.0 Client ID" (Web application).
#
# CRITICAL - Authorized redirect URIs (must match exactly, no trailing slash):
#   - http://localhost:4200/api/auth/callback/google
#   - http://127.0.0.1:4200/api/auth/callback/google   (add if you open the app via 127.0.0.1)
# The redirect URI is built from NEXTAUTH_URL + /api/auth/callback/google

GMAIL_CLIENT_ID=client_id
GMAIL_CLIENT_SECRET=google_secret
GMAIL_REDIRECT_URI=http://localhost:4200/api/auth/callback/google

# ======================
# Twilio Configuration
# ======================
# Get these from Twilio Console:
# 1. Go to https://console.twilio.com/
# 2. Navigate to Account > Keys & Credentials
# 3. Find your Account SID and Auth Token
# 4. Enable WhatsApp in Messaging > Try it out > Send a WhatsApp message
# 5. Note your WhatsApp-enabled number (format: whatsapp:+14155238886)

TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# ======================
# Trello Configuration
# ======================
# Get these from https://trello.com/app-key
# 1. Visit the link and copy your API Key
# 2. Click "Token" to generate a token (authorize the app)
# 3. Use the list ID from a Trello board list URL (e.g. .../board_id/list_id)

TRELLO_API_KEY=your-trello-api-key
TRELLO_TOKEN=your-trello-token

# ======================
# OpenAI Configuration
# ======================
# Get this from https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# ======================
# Database Configuration
# ======================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
# For Docker setup, these values match docker-compose.yml

DATABASE_URL=postgresql://devuser:devpassword@localhost:5432/email_whatsapp_bridge

# ======================
# JWT Secret
# ======================
# Secret key for signing JWT tokens
# Generate a strong random string (at least 32 characters)
# You can generate one with: openssl rand -base64 32

JWT_SECRET='secret'

# ======================
# AI Provider (Anthropic / Claude)
# ======================
# Get your API key from https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key

# ======================
# Application Settings
# ======================

# Node environment (development, production, test)
NODE_ENV=development

# API server port
API_PORT=3000

# Frontend URL (for CORS configuration)
FRONTEND_URL=http://localhost:4200

# Next.js public API URL (exposed to browser)
NEXT_PUBLIC_API_URL=http://localhost:3000/api

NEXT_PUBLIC_POSTHOG_KEY=your_posthog_key
NEXT_PUBLIC_POSTHOG_HOST=posthog_url

# ======================
# Dynamic Trend Blog / SEO (optional)
# ======================
# NewsAPI (free tier: 100 req/day) – https://newsapi.org
NEWS_API_KEY=
# Reddit API (free) – for trend discovery
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=

# Feature flags (start false, enable after validation)
ENABLE_DYNAMIC_KEYWORDS=false
ENABLE_AUTO_INTERNAL_LINKING=false
ENABLE_CONTENT_REFRESH=false

# Config
MIN_KEYWORD_RELEVANCE_SCORE=0.6
MAX_ACTIVE_KEYWORDS=50